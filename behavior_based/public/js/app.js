define("application/behavior/handlebars",["system/core/ma_behavior"],function(a){var b=a.extend({initialize:function(){"string"==typeof this.view.template&&(this.view.template=hbsTemplate[this.view.template])}});return b}),define("application/behavior/image_loader",["system/core/ma_behavior"],function(a){var b=a.extend({onShow:function(){_.defer(_.bind(function(){console.log(this.$el.find(".question-image").length)},this))}});return b}),define("application/behavior/mousemove",["system/core/ma_behavior"],function(a){var b=a.extend({events:{mousemove:"onMouseMove"},onMouseMove:function(a){console.log(a)}});return b}),define("application/behavior/pixi",["system/core/ma_behavior"],function(a){var b=a.extend({events:{"mousemove canvas":"onUserInteraction","touchmove canvas":"onUserInteraction","mousedown canvas":"onUserInteraction","touchstart canvas":"onUserInteraction","mouseup canvas":"onUserInteraction","touchend canvas":"onUserInteraction","mouseenter canvas":"onUserInteraction","mouseleave canvas":"onUserInteraction","click canvas":"onUserInteraction"},updateAnimationFrame:null,onShow:function(){this.$el.append("<canvas></canvas>"),this.autoStart&&this.start()},initialize:function(){this.view.on("destroy",_.bind(this.onDestroy,this)),this.autoStart=this.options.autoStart!==!1,a.prototype.initialize.apply(this)},start:function(){this.triggerViewMethod("beforeStart",arguments),_.bind(function a(){this.updateAnimationFrame=requestAnimationFrame(_.bind(a,this)),this.onUpdate()},this)(),this.triggerViewMethod("afterStart",arguments)},stop:function(){this.triggerViewMethod("beforeStop",arguments),window.cancelAnimationFrame(this.updateAnimationFrame),this.triggerViewMethod("afterStop",arguments)},onDestroy:function(){this.stop()},onResize:function(a){this.triggerViewMethod("resize",a)},onUpdate:function(){this.triggerViewMethod("update",{})},onUserInteraction:function(a){this.triggerViewMethod(a.type,a)},onStart:function(){this.start()}});return b}),define("application/behavior/scrollable",["system/core/ma_behavior"],function(a){var b=a.extend({onShow:function(){}});return b}),define("application/behavior/twig",["system/core/ma_behavior"],function(a){var b=a.extend({initialize:function(){"string"==typeof this.view.template&&(this.view.template=twigTemplate[this.view.template]),this.view._renderTemplate=this._renderTemplate},_renderTemplate:function(){var a=this.getTemplate();if(a!==!1){if(!a)throw new Marionette.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var b=this.serializeData();b=this.mixinTemplateHelpers(b);var c=a.render(b);return this.attachElContent(c),this}}});return b}),define("application/component/sample/sample",["system/application","system/core/ma_module","application/component/sample/view/sample_layout"],function(a,b,c){a.module("sample",{moduleClass:b,initialize:function(){this.channel.commands.execute("setView",new c,"header"),Backbone.Marionette.Module.prototype.initialize.apply(this,arguments)}})}),define("application/component/sample/view/sample_layout",["system/core/ma_layout","application/behavior/twig"],function(a,b){var c=a.extend({template:"subdir/tpl",events:{"click .action":"clickMethod"},initialize:function(){this.model=new Backbone.Model,this.model.set("message","this is a message from backbone model"),a.prototype.initialize.apply(this,arguments)},behaviors:{twig:{behaviorClass:b}},className:"component-sample",regions:{header:".header-component"},clickMethod:function(a){a.preventDefault(),alert("clickMethod binded by Backbone.Events")}});return c}),define("application/config/config",function(){return{name:"sample project",base_url:window.BASE_URL||"",container:"#container",urlPushState:"undefined"!=typeof window.enablePushState?window.enablePushState:Modernizr&&Modernizr.history,mainModule:"code_route",globalChannelName:"global"}}),define("application/config/module_routes",function(){var a={code_route:["code_route","page","abc"],module_sample:["test","sample"],module_pixi:["pixi"]};return a}),define("application/core/my_item_view",["system/core/ma_item_view"],function(a){var b=a.extend({override:!0});return b}),define("application/core/my_region_transition",["system/core/ma_region_transition"],function(a){var b=a.extend({initialize:function(){this.addTransition("slideFromRight",this.slideFromRight),this.addTransition("slideFromLeft",this.slideFromLeft)},slideFromRight:function(a,b,c){var d=b.$el.parent().width();TweenLite.fromTo(a.$el,.4,{zIndex:1},{x:-d,opacity:.8}),TweenLite.fromTo(b.$el,.4,{zIndex:2,x:d},{x:0,onComplete:function(){c()}})},slideFromLeft:function(a,b,c){var d=b.$el.parent().width();TweenLite.fromTo(a.$el,.4,{zIndex:1},{x:d,opacity:.8}),TweenLite.fromTo(b.$el,.4,{zIndex:2,x:-d},{x:0,onComplete:function(){c()}})},slideFromBottom:function(a,b,c){var d=b.$el.parent().height();TweenLite.fromTo(a.$el,.4,{zIndex:1},{y:d,opacity:.8}),TweenLite.fromTo(b.$el,.4,{zIndex:2,y:-d},{y:0,onComplete:function(){c()}})},slideFromTop:function(a,b,c){var d=b.$el.parent().height();TweenLite.fromTo(a.$el,.4,{zIndex:1},{y:d,opacity:.8}),TweenLite.fromTo(b.$el,.4,{zIndex:2,y:-d},{y:0,onComplete:function(){c()}})}});return b}),define("application/helper/handlebars",function(){Handlebars.registerHelper("uppercase",function(a){return a.toUpperCase()})}),define("application/helper/sample",function(){var a={alert:function(){_.each(arguments,function(a){alert(a)})}};return a}),define("application/module/code_route/code_route",["system/application","system/core/ma_module","application/module/code_route/router/router"],function(a,b,c){a.module("code_route",{startWithParent:!1,moduleClass:b,initialize:function(){this.on("start",function(a){new c(a)}),Backbone.Marionette.Module.prototype.initialize.apply(this,arguments)}})}),define("application/module/code_route/collection/question_collection",["application/module/code_route/model/question_model"],function(a){var b=Backbone.Collection.extend({model:a,url:"contrib/questions.json"});return b}),define("application/module/code_route/controller/controller",["system/core/ma_controller","application/module/code_route/view/layout","application/module/code_route/view/start_view","application/module/code_route/view/end_view","application/module/code_route/view/question_view","application/module/code_route/model/i18n_model"],function(a,b,c,d,e,f){var g=a.extend({timer:{},layout:null,initialize:function(){this.channel.vent.on("btnStart",_.bind(this.hideModal,this)),this.channel.vent.on("end",_.bind(this.questionEnd,this))},index:function(){this.layout=new b,this.channel.commands.execute("setView",this.layout,"content","fade"),this.i18nModel=new f,this.i18nModel.fetch().then(_.bind(function(){clearTimeout(this.timer.started),this.layout.setView(new c({model:this.i18nModel}),"content",{transition:"fade"})},this))},hideModal:function(){this.layout.setView(new e,"content",{transition:"fade"}),clearTimeout(this.timer.started),this.timer.started=setTimeout(_.bind(this.questionEnd,this),6e4)},questionEnd:function(a){clearTimeout(this.timer.started),this.layout.setView(new d({isValid:a&&a.isValid||!1,model:this.i18nModel}),"content",{transition:"fade"})}});return g}),define("application/module/code_route/model/i18n_model",[],function(){var a=Backbone.Model.extend({url:"contrib/i18n.json"});return a}),define("application/module/code_route/model/question_model",["system/core/ma_model"],function(a){var b=a.extend({});return b}),define("application/module/code_route/router/router",["system/core/ma_sub_router","application/module/code_route/controller/controller"],function(a,b){var c=a.extend({initialize:function(a){this.controller=new b(a)},appRoutes:{"":"index"}});return c}),define("application/module/code_route/view/end_view",["application/core/my_item_view"],function(a){var b=a.extend({template:"#result",initialize:function(a){this.serializeData=_.bind(function(){return{result:this[a.isValid?"getOkText":"getKoText"]()}},this)},getOkText:function(){return this.model.get("resultOkText")[_.random(0,this.model.get("resultOkText").length-1)]},getKoText:function(){return this.model.get("resultKoText")[_.random(0,this.model.get("resultKoText").length-1)]}});return b}),define("application/module/code_route/view/layout",["system/core/ma_layout","application/core/my_region_transition"],function(a){var b=a.extend({template:"#layout",className:"code-route",regions:{header:".layout-header",content:".layout-content",footer:".layout-footer"}});return b}),define("application/module/code_route/view/question_view",["system/core/ma_item_view","application/module/code_route/collection/question_collection","application/behavior/image_loader"],function(a,b,c){var d=a.extend({template:"#question",ui:{form:".response-form"},events:{"submit @ui.form":"submitForm"},behaviors:{imageLoader:{behaviorClass:c}},collection:new b,initialize:function(){this.collection.fetch().then(_.bind(function(){this.setQuestion()},this)),a.prototype.initialize.apply(this,arguments)},setQuestion:function(){this.model=this.collection.at(_.random(0,this.collection.length-1)),this.render()},render:function(){this.model&&a.prototype.render.apply(this,arguments)},onAfterRender:function(){TweenLite.fromTo(this.$el.find(".response-form"),1,{y:window.innerHeight},{y:0,ease:Cubic.easeOut})},submitForm:function(a){a.preventDefault(),this.checkResponse(a.currentTarget)},checkResponse:function(a){var b=this.$(a),c=!0,d=this.model.get("responses");b.find("[name=responses]").each(function(a,b){for(var e=$(b),f=e.val(),g=0,h=d.length;h>g;g++)f==d[g].value&&(e.is(":checked")&&!d[g].valid?c=!1:e.is(":not(:checked)")&&d[g].valid&&(c=!1))}),this.channel.vent.trigger("end",{isValid:c})}});return d}),define("application/module/code_route/view/start_view",["application/core/my_item_view","application/behavior/mousemove"],function(a){var b=a.extend({template:"#intro",ui:{start:".start"},events:{"click @ui.start":"startBtn"},initialize:function(){a.prototype.initialize.apply(this,arguments)},startBtn:function(){this.channel.vent.trigger("btnStart")}});return b}),define("application/module/module_pixi/controller/controller",["system/core/ma_controller","application/module/module_pixi/view/pixi_composite_view"],function(a,b){var c=a.extend({index:function(){this.channel.commands.execute("setView",new b,"content",!0)},sample:function(){this.index.apply(this,arguments),console.log("controller/sample",arguments)}});return c}),define("application/module/module_pixi/module_pixi",["system/application","system/core/ma_module","application/module/module_pixi/router/router"],function(a,b,c){a.module("module_pixi",{startWithParent:!1,moduleClass:b,initialize:function(){this.on("start",function(a){new c(a)}),Backbone.Marionette.Module.prototype.initialize.apply(this,arguments)}})}),define("application/module/module_pixi/router/router",["system/core/ma_sub_router","application/module/module_pixi/controller/controller"],function(a,b){var c=a.extend({initialize:function(a){this.controller=new b(a)},appRoutes:{sample:"sample","":"index"}});return c}),define("application/module/module_pixi/view/pixi_composite_view",["system/core/ma_composite_view","application/behavior/pixi","application/module/module_pixi/view/pixi_item_view"],function(a,b,c){var d=a.extend({template:$.noop,className:"container-canvas",behaviors:{pixi:{behaviorClass:b}},initialize:function(){new c},onMousemove:function(a){this.channel.vent.trigger("module_pixi:mousemove",a)},onResize:function(a){this.channel.vent.trigger("module_pixi:resize",a)},onUpdate:function(){this.channel.vent.trigger("module_pixi:update")}});return d}),define("application/module/module_pixi/view/pixi_item_view",["system/core/ma_item_view"],function(a){var b=a.extend({initialize:function(){this.channel.vent.on("module_pixi:update",this.onUpdate),this.channel.vent.on("module_pixi:mousemove",this.onMousemove)},onUpdate:function(){},onMousemove:function(){console.log("mouse move")}});return b}),define("application/module/module_sample/controller/controller",["system/core/ma_controller","application/module/module_sample/view/sample_view"],function(a,b){var c=a.extend({index:function(){this.channel.commands.execute("setView",new b,"content",!0)}});return c}),define("application/module/module_sample/module_sample",["system/application","system/core/ma_module","application/module/module_sample/router/router"],function(a,b,c){a.module("module_sample",{startWithParent:!1,moduleClass:b,initialize:function(){this.on("start",function(a){new c(a)}),Backbone.Marionette.Module.prototype.initialize.apply(this,arguments)}})}),define("application/module/module_sample/router/router",["system/core/ma_sub_router","application/module/module_sample/controller/controller"],function(a,b){var c=a.extend({initialize:function(a){this.controller=new b(a)},appRoutes:{"":"index"}});return c}),define("application/module/module_sample/view/sample_view",["system/core/ma_item_view"],function(a){var b=a.extend({template:"<div>This is a module sample view</div>"});return b}),define("main",["system/application_initializer","application/component/sample/sample","application/module/code_route/code_route","application/module/module_sample/module_sample","application/module/module_pixi/module_pixi"],function(a){a.start()}),define("system/application",["application/config/config"],function(a){return new Backbone.Marionette.Application({channelName:a.globalChannelName||"global"})}),define("system/application_controller",["system/core/ma_controller"],function(a){var b=a.extend({initialize:function(a){this.options=a.opt,this.application=a.app,this.mainModule=a.opt.mainModule},index:function(a){var b;this.options.urlPushState||window.location.hash||(b=window.location.href.replace("http://"+window.location.hostname+this.options.base_url,""),b&&Backbone.history.navigate(b,{trigger:!0})),this.application[this.mainModule]&&this.application.module(this.mainModule).start(a)},runModule:function(a){var b;this.moduleRoutes&&this.moduleRoutes[a]&&(b=this.moduleRoutes[a]),_.each(this.moduleRoutes,function(c,d){b=-1!=_.indexOf(c,a)?d:b}),b&&this.application[b]||this.index.apply(this,arguments),this.application[b]&&this.application.module(b).start(a)}});return b}),define("system/application_initializer",["system/application","system/application_router","system/application_layout","application/config/config"],function(a,b,c,d){var e=new c;return a.addInitializer(function(){a.addRegions({mainRegion:d.container}),e.template!==!1&&a.mainRegion.show(e)}),a.addInitializer(function(){$(window).on("scroll",function(b){a.vent.trigger("custom:scroll",b)}),$(window).on("resize",function(b){a.vent.trigger("custom:resize",b)})}),a.addInitializer(function(){a.commands.setHandler("setView",function(a,b,c,d){e.setView(a,b,c,d)}),a.commands.setHandler("removeView",function(a,b,c){e.removeView(a,b,c)}),a.commands.setHandler("fadeOut",function(a,b){e.fadeOut(500,a,b)}),a.commands.setHandler("fadeIn",function(a,b){e.fadeIn(500,a,b)})}),a.addInitializer(function(){a.reqres.setHandler("getApp",function(){return a})}),a.addInitializer(function(){a.reqres.setHandler("getSettings",function(){return d})}),a.addInitializer(function(){Backbone.Marionette.Behaviors.behaviorsLookup=function(){return Backbone.Marionette.Behaviors.behaviorsStore}}),a.addInitializer(function(){new b({app:a,opt:d})}),a.on("start",function(){var a={};a.pushState=d.urlPushState,a.silent=!1,d.base_url&&(a.root=d.base_url),Backbone.history.start(a)}),a}),define("system/application_layout",["system/core/ma_layout","system/core/ma_region_transition"],function(a,b){var c=a.extend({regions:{header:new b({el:"#header"}),content:new b({el:"#content"}),footer:new b({el:"#footer"})},initialize:function(){this.addRegions({modal:"#modal"}),this.$el.append('<div id="modal"></div>'),a.prototype.initialize.apply(this,arguments)}});return c}),define("system/application_router",["system/core/ma_app_router","system/application_controller","application/config/module_routes"],function(a,b,c){var d=a.extend({initialize:function(c){this.controller=new b(c),this.controller.moduleRoutes=this.moduleRoutes,a.prototype.initialize.apply(this,arguments)},appRoutes:{":module(/*subRoute)":"runModule","*actions":"index"},moduleRoutes:c});return d}),define("system/behavior/modal",["system/core/ma_behavior"],function(a){var b=a.extend({events:{"click .close-modal":"closeModal","click .background-layer":"closeModal"},initialize:function(){this.channel.commands.setHandler("modal:open",this.openModal),a.prototype.initialize.apply(this,arguments)},openModal:function(a){this.triggerViewMethod("onBeforeOpenModal",arguments),this.channel.commands.execute("fadeIn","modal",_.bind(function(){this.triggerViewMethod("onAfterOpenModal",arguments)},this,a))},closeModal:function(a){this.triggerViewMethod("onBeforeCloseModal",arguments),this.channel.commands.execute("fadeIn","modal",_.bind(function(){this.triggerViewMethod("onAfterCloseModal",arguments)},this,a))}});return b}),define("system/core/ma_app_router",function(){var a=Backbone.Marionette.AppRouter.extend();return a}),define("system/core/ma_behavior",["application/config/config"],function(a){var b=Backbone.Marionette.Behavior.extend({channel:Backbone.Wreqr.radio.channel(a.globalChannelName||"global"),triggerViewMethod:function(a,b){var c="on"+a.charAt(0).toUpperCase()+a.slice(1);this.view&&this.view[c]&&this.view[c].call(this.view,b)},initialize:function(){this.channel.vent.on("custom:resize",_.bind(this.onResize,this)),this.channel.vent.on("custom:scroll",_.bind(this.onScroll,this)),Backbone.Marionette.Behavior.prototype.initialize.apply(this,arguments)},onResize:$.noop,onScroll:$.noop});return b}),define("system/core/ma_collection",function(){var a=Backbone.Collection.extend();return a}),define("system/core/ma_collection_view",["application/config/config"],function(a){var b=Backbone.Marionette.CollectionView.extend({channel:Backbone.Wreqr.radio.channel(a.globalChannelName||"global"),template:!1,initialize:function(){this.channel.vent.on("custom:scroll",_.bind(this.onScroll,this)),this.channel.vent.on("custom:resize",_.bind(this.onResize,this)),Backbone.Marionette.CollectionView.prototype.initialize.apply(this,arguments)},render:function(){Backbone.Marionette.CollectionView.prototype.render.apply(this,arguments),_.defer(_.bind(this.onAfterRender,this))},onResize:$.noop,onScroll:$.noop,onAfterRender:$.noop});return b}),define("system/core/ma_composite_view",["application/config/config"],function(a){var b=Backbone.Marionette.CompositeView.extend({channel:Backbone.Wreqr.radio.channel(a.globalChannelName||"global"),template:!1,initialize:function(){this.channel.vent.on("custom:scroll",_.bind(this.onScroll,this)),this.channel.vent.on("custom:resize",_.bind(this.onResize,this)),Backbone.Marionette.CompositeView.prototype.initialize.apply(this,arguments)},render:function(){Backbone.Marionette.CompositeView.prototype.render.apply(this,arguments),_.defer(_.bind(this.onAfterRender,this))},onResize:$.noop,onScroll:$.noop,onAfterRender:$.noop});return b}),define("system/core/ma_controller",["application/config/config"],function(a){var b=Backbone.Marionette.Controller.extend({channel:Backbone.Wreqr.radio.channel(a.globalChannelName||"global")});return b}),define("system/core/ma_item_view",["application/config/config"],function(a){var b=Backbone.Marionette.ItemView.extend({channel:Backbone.Wreqr.radio.channel(a.globalChannelName||"global"),template:!1,initialize:function(){this.channel.vent.on("custom:scroll",_.bind(this.onScroll,this)),this.channel.vent.on("custom:resize",_.bind(this.onResize,this)),Backbone.Marionette.ItemView.prototype.initialize.apply(this,arguments)},render:function(){Backbone.Marionette.ItemView.prototype.render.apply(this,arguments),_.defer(_.bind(this.onAfterRender,this))},onResize:$.noop,onScroll:$.noop,onAfterRender:$.noop});return b}),define("system/core/ma_layout",["system/core/ma_region_transition","application/config/config"],function(a,b){var c=Backbone.Marionette.LayoutView.extend({channel:Backbone.Wreqr.radio.channel(b.globalChannelName||"global"),template:!1,regionClass:a,render:function(){Backbone.Marionette.LayoutView.prototype.render.apply(this,arguments),_.defer(_.bind(this.onAfterRender,this))},removeView:function(a,b,c){this[a]&&this.fadeOut(b?500:1,a,_.bind(function(){this[a].empty(),"function"==typeof c&&c()},this))},setView:function(a,b,c,d){if(a&&b&&this[b]){if(this[b].currentView===a)return;this[b].show(a,c,d)}},fadeIn:function(a,b,c){this[b]&&this[b].$el.fadeIn(a,c)},fadeOut:function(a,b,c){this[b]&&this[b].$el.fadeOut(a,c)},onAfterRender:$.noop});return c}),define("system/core/ma_model",function(){var a=Backbone.Model.extend();return a}),define("system/core/ma_module",["application/config/config"],function(a){var b=Backbone.Marionette.Module.extend({channel:Backbone.Wreqr.radio.channel(a.globalChannelName||"global")});return b}),define("system/core/ma_object",function(){var a=Backbone.Marionette.Object.extend();return a}),define("system/core/ma_region",function(){var a=Backbone.Marionette.Region.extend({});return a}),define("system/core/ma_region_transition",["system/core/ma_region"],function(a){var b=a.extend({transitions:{fade:function(a,b,c){TweenLite.to(a.$el,0,{opacity:0}),TweenLite.fromTo(b.$el,1,{opacity:0},{opacity:1,delay:.05,onComplete:function(){c()}})},cut:function(){TweenLite.to(currentView.$el,0,{opacity:0}),TweenLite.fromTo(view.$el,1,{opacity:0},{opacity:1,delay:.05,onComplete:function(){callback()}})}},addTransition:function(a,b){this.transitions[a]=b},show:function(a,b){this._ensureElement();var c=$.extend({transition:"fade"},b||{}),d=a!==this.currentView,e=!!c.preventDestroy,f=!!c.forceShow;return this.isChangingView=!!this.currentView,this._shouldDestroyView=!e&&d&&"undefined"!=typeof this.currentView,this._shouldDestroyView&&this.transitions[c.transition]?this.swap(a,this.transitions[c.transition]):(d||f)&&this.open(a),this},open:function(a){return a.render(),this.onBeforeViewShow(a),this.attachHtml(a),this.currentView=a,this.onViewShow(a),this},swap:function(a,b){var c=this;a.render(),this.attachSwapHtml(a),this.onBeforeViewShow(a),_.isFunction(this.currentView.triggerMethod)?this.currentView.triggerMethod("disable"):this.triggerMethod.call(this.currentView,"disable"),this.triggerMethod("before:swap",this.currentView,a),b.call(c,c.currentView,a,function(){c.transitionEnd(a)})},attachSwapHtml:function(a){this.el.appendChild(a.el)},transitionEnd:function(a){this.currentView.destroy&&!this.currentView.isDestroyed?this.currentView.destroy():this.currentView.remove&&this.currentView.remove(),this.currentView=a,this.onViewShow(a)},onBeforeViewShow:function(a){this.triggerMethod("before:show",a),_.isFunction(a.triggerMethod)?a.triggerMethod("before:show"):this.triggerMethod.call(a,"before:show"),a.onBeforeShow&&a.onBeforeShow(a)},onViewShow:function(a){this.triggerMethod("show",a),_.isFunction(a.triggerMethod)?a.triggerMethod("show"):this.triggerMethod.call(a,"show")}});return b}),define("system/core/ma_router",function(){var a=Backbone.Router.extend();return a}),define("system/core/ma_sub_router",function(){var a=Backbone.Marionette.SubRouter.extend();return a}),define("system/core/ma_view",["application/config/config"],function(a){var b=Backbone.Marionette.View.extend({channel:Backbone.Wreqr.radio.channel(a.globalChannelName||"global"),template:!1,initialize:function(){this.channel.vent.on("custom:scroll",_.bind(this.onScroll,this)),this.channel.vent.on("custom:resize",_.bind(this.onResize,this)),Backbone.Marionette.View.prototype.initialize.apply(this,arguments)},render:function(){Backbone.Marionette.View.prototype.render.apply(this,arguments),_.defer(_.bind(this.onAfterRender,this))},onResize:$.noop,onScroll:$.noop,onAfterRender:$.noop});return b});
//# sourceMappingURL=app.js.map